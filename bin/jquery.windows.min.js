(function(c,w,x,C){function y(a,b){this.element=a;m=m=c.extend({},c.fn[n].defaults,b);this._defaults=c.fn[n].defaults;this._name=n;p.push(a);var d=(new k(c(a),f)).isOnScreen();c(a).data("onScreen",d);if(d)m.onWindowEnter(c(a))}function k(a,b){var d=Math.round(a.offset().top-b.scrollTop()),c=Math.round(d+a.height()),e=Math.round(b.height()),g=Math.round(a.height());this.isOnScreen=function(){return a.is(":visible")&&d<e&&0<c?!0:!1};this.prevInternalFrame=function(){var a=null;g>e&&0>d&&(a=d<-1*e?-1*
e:d,a+=b.scrollTop());return a};this.nextInternalFrame=function(){var a=null;g>e&&c>e&&(a=c>2*e?e:c-e,a+=b.scrollTop());return a};this.snapPosition=function(){var l=0;a.height()<e?(l=d-(e-a.height())/2,2>Math.abs(l)&&(l=0)):0<d?l=d:c<=e&&(l=c-e);l+=b.scrollTop();l+e>b.docHeight()&&(l=b.docHeight()-e);0>l&&(l=0);return l};this.window=function(){return a}}var n="windows",m={},q=c(w),u=0,p=[],r=function(){var a=99999,b=p[0],d=null,h=0;c.each(p,function(e){d=new k(c(this),f);d.isOnScreen()&&(h=Math.abs(d.snapPosition()-
f.scrollTop()),h<a&&(a=h,b=c(this)))});return c(b)},z=function(){u=q.scrollTop();v();m.onScroll(u);c.each(p,function(a){a=c(this);var b=(new k(a,f)).isOnScreen();if(b&&!a.data("onScreen"))m.onWindowEnter(a);a.data("onScreen",b)})},A=function(){v()},B=function(a){if(m.enableKeys){var b=null;switch(a.which){case 40:case 34:b=s();break;case 38:case 33:b=t();break;case 32:if(!0===a.altKey||!0===a.controlKey)return;b=!0===a.shiftKey?t():s()}null!==b&&(f.scrollToPosition(b.pos,b.win),a.preventDefault())}},
t=function(){var a=new k(r(),f),b={pos:a.prevInternalFrame(),win:a.window()};if(null===b.pos){var d=-1,h=null,e=a.window().offset().top,g;c.each(p,function(a){g=c(this).offset().top;g<e&&(g>d&&c(this).is(":visible"))&&(d=g,h=c(this))});h&&(a=new k(c(h),f),b.pos=a.snapPosition(),b.win=a.window())}return b},s=function(){var a=new k(r(),f),b={pos:a.nextInternalFrame(),win:a.window()};if(null===b.pos){var d=999999,h=null,e=r().offset().top,g;c.each(p,function(a){g=c(this).offset().top;g>e&&(g<d&&c(this).is(":visible"))&&
(d=g,h=c(this))});h&&(a=new k(c(h),f),b.pos=a.snapPosition(),b.win=a.window())}return b},f=new function(a){var b=!1,d,h=null,e=this,g=null;this.docHeight=function(){return c(x).height()};this.height=function(){return a.height()};this.lastWindow=function(){return h};this.scrollTop=function(){return b?d:a.scrollTop()};this.scrollToPosition=function(e,f){if(!(null===e||!b&&a.scrollTop()===e||b&&e===d)){g&&clearTimeout(g);b=!0;d=e;h=f;var k=!1;c("html:not(:animated),body:not(:animated)").stop(!0).animate({scrollTop:d},
m.scrollSpeed,m.easing,function(){b=!1;k||(k=!0,m.onSnapComplete(f))})}};this.scrollToPositionDelay=function(a,b){null!==a&&a!==e.scrollTop()&&(g&&clearTimeout(g),g=setTimeout(function(){e.scrollToPosition(a,b)},m.scrollDelay))}}(q),v=function(a){if(m.snapping){a=new k(r(),f);var b=a.snapPosition();f.scrollToPositionDelay(b,a.window())}};c.fn[n]=function(a){q.scroll(z);q.resize(A);q.keydown(B);if("string"===typeof a){var b=[];switch(a){case "getCurrentWindow":return r();case "isOnScreen":this.each(function(a){b.push((new k(c(this),
f)).isOnScreen())});break;case "nextView":var d=s();f.scrollToPosition(d.pos,d.win);return this;case "prevView":return d=t(),f.scrollToPosition(d.pos,d.win),this;case "snapPosition":this.each(function(a){b.push((new k(c(this),f)).snapPosition())})}switch(b.length){case 0:return null;case 1:return b[0];default:return b}}return this.each(function(b){c.data(this,"plugin_"+n)||c.data(this,"plugin_"+n,new y(this,a))})};c.fn[n].defaults=defaults={snapping:!0,scrollSpeed:500,scrollDelay:1100,enableKeys:!0,
easing:"swing",onScroll:function(){},onSnapComplete:function(){},onWindowEnter:function(){}}})(jQuery,window,document);